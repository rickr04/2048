let keypress,Game;_9f7‍.w("keypress",[["default",["keypress"],function(v){keypress=v}]]);_9f7‍.w("./engine/game",[["default",["Game"],function(v){Game=v}]]);


keypress(process.stdin);


/**
 * The code in this file is used to run your game in the console. Use it
 * to help develop your game engine.
 *
 */

let game = new Game(4);
_9f7‍.g.console.log(game.getGameState());
_9f7‍.g.console.table(game.two_d_array);
let gameState_test = {
    board: [1024,1024,2,2,0,0,0,0,0,0,0,0,0,0,0,0],
    score:0,
    won:false,
    over: false,
    };

game.loadGame(gameState_test);

// console.log(game.getGameState());
_9f7‍.g.console.table(game.two_d_array);

game.onMove(gameState => {
    _9f7‍.g.console.log(game.toString());
    
});

game.onWin(gameState => {
    _9f7‍.g.console.log('You won with a gameState of...', gameState)
});

game.onLose(gameState => {
    _9f7‍.g.console.log('You lost! :(', gameState)
    console.log(`Your score was ${gameState.score}`);
});

process.stdin.on('keypress', function (ch, key) {
    switch (key.name) {
        case 'right':
            game.move('right');
            _9f7‍.g.console.log(game.getGameState());
            break;
        case 'left':
            game.move('left');
            _9f7‍.g.console.log(game.getGameState());
            break;
        case 'down':
            game.move('down');
            _9f7‍.g.console.log(game.getGameState());
            break;
        case 'up':
            game.move('up');
            _9f7‍.g.console.log(game.getGameState());
            break;
    }
    if (key && key.ctrl && key.name == 'c') {
        process.stdin.pause();
    }
});


process.stdin.setRawMode(true);
process.stdin.resume();

